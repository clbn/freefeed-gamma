// Post: header (author and recipients)
$font-size-post-header: 15px;
$line-height-post-header: 21px;

// Post: body
$font-size-post-body: 16px;
$line-height-post-body: 22px;

// Post: footer (timestamp and actions)
$font-size-post-footer: 14px;
$line-height-post-footer: 19px;

// Single post: header (author and recipients)
$font-size-post-header-single: 19px;
$line-height-post-header-single: 26px;

// Single post: body
$font-size-post-body-single: 21px;
$line-height-post-body-single: 28px;


.post {
  padding-top: 14px;
  padding-bottom: 14px;
  border-bottom: 1px solid #eee;

  // Clearfix (http://www.cssmojo.com/latest_new_clearfix_so_far/)
  &:after {
    content: '';
    display: table;
    clear: both;
  }

  a {
    color: #555599;
  }

  .read-more {
    color: #555599 !important;
    font-style: italic;
    white-space: nowrap;
  }

  .p-break {
    display: block;
    height: 0.35em;
  }

  // Left part of post.
  // Includes userpic(s).
  .post-userpic {
    float: left;
    margin-right: 10px;

    &.has-secondary {
      position: relative;
      margin-bottom: 4px;

      .userpic-secondary {
        position: absolute;
        // `top` set in JS
        left: 17%;

        width: 33px;
        height: 33px;

        &.userpic-large {
          width: 50px;
          height: 50px;
        }
      }
    }
  }

  // Top part of post, it wraps around userpic on mobile.
  // Includes post-header and post-text/post-editor.
  .post-top {
    color: #666;

    margin-left: 52px + 10px;
    @media (max-width: 767px) { margin-left: 0; min-height: 52px; }

    .post-header {
      font-size: $font-size-post-header;
      line-height: $line-height-post-header;
      margin-bottom: 2px;

      a {
        font-weight: bold;
        color: #000088;
      }

      .post-recipient {
        font-weight: 500;
      }
    }

    .post-text {
      color: #000;
      font-size: $font-size-post-body;
      line-height: $line-height-post-body;

      overflow-wrap: break-word;
      word-wrap: break-word;

      margin-bottom: 8px;

      a {
        color: #000088;
      }
    }
  }

  // Bottom part of post, it goes below userpic on mobile.
  // Includes attachments, post-footer, likes and comments.
  .post-bottom {
    color: #666;
    font-size: $font-size-post-footer;
    line-height: $line-height-post-footer;

    margin-left: 52px + 10px;
    @media (max-width: 767px) { clear: both; margin-left: 0; }

    .post-footer {
      .post-visibility-icon {
        display: inline-block;
        margin: 0 6px 0 1px;

        &.protected {
          width: 14px;
          margin-right: 4px;

          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE2LTEyLTAyVDE0OjI2OjExKzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxNi0xMi0xMFQxNTozMzowMSswMTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxNi0xMi0xMFQxNTozMzowMSswMTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEVCNzZBNTdCNzBDMTFFNkIxQjNDNDlEMzgwMDU1NDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEVCNzZBNThCNzBDMTFFNkIxQjNDNDlEMzgwMDU1NDYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RUI3NkE1NUI3MEMxMUU2QjFCM0M0OUQzODAwNTU0NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RUI3NkE1NkI3MEMxMUU2QjFCM0M0OUQzODAwNTU0NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po4VKFEAAARuSURBVHjanFZLT6NVGD5f+bhTLsN1qDJQbhMX6A5lMmHHRB0TcKEmhCWuZ+dOf8DEuJnNODGzqLIlJmBINCYMFQmRpCSsbIFSLmkJhEsLFCjF5znh1NMzp4PxJF++c3nPed7zXp73OMlkUrA5jiOur6+Fahxns1lxfHwsMpmMXDs9PRWu64qzszPR3d0t9La8vHx/Zmbm152dnbsjIyPj/f39Lz0eT55MUVGRcG1AbPqc3me7urqSymjjqqmpqent7e23KDs5Ofm8oaEh0dra+ou+r7q6Wnj0QxWY2cz5i4sLEYlExOHhoTg4OODtHm9tbfmVYlgvnpub+5r7+F1eXorz83OJ4VFC+k3NG+nASjGCxeNxcXJyIlKpVLVaV8rB/N7S0lJBs+7u7ubOcAvdytZMKwAoD8RQ9Jq3Wl9fz5Nx1SG33e5m7Q40fwCT3UMgSWVpUpjs/b6+vpxfeau6urr6cDj8hHMYZ9Pp9CsshRxGqamhGlP46OiIPmlMJBJP0f8CMqVmkJlK24IP40xPT8+njkoL22Z+8NOjaDT6Ajd622Za0yImsD5fUlLyt6uHtwm4v7//CGaZ0n39f8BUg9KNEtCWEvBL4+rq6g+Yd3X/6nImwJuU4bilpeWZy0iyReLGxsZTgPrM5MdaurKy8g+EfEqtwbf3Njc339MBy8vLk52dnb/f7E1Dfrqtre0nl7RlNjDHnb29vc/NG2BTGOzxEQ6LkDUU6ywtLX05Ozv7XHcJwGJDQ0PD7BODwSfTQvGkLoz8eoB/mcGDp729vR9DPqL5RB5ki4NCKeYqciZdKSHmmW4e/mHGP5FPYbIH5fmRbQpxLhR0bKBuTU2NBONmMseNmfIYiJsQ0qmysjIJjiQW8Bnn5DrioNKMcsYdKwvHrBL19fVy3lW0U1FRIUsPgfXgMf3IIGPuUrmOjg5BJRYWFh7qt+EfZyXg29dNqt+Cm2tra5l/VuYh69Nnap71MRgMfjY/Pz9s+g+sEmxvb38tA1xVz1BeHsP5Xk7Crx/QtzoogNqhyLgawxJVKysrD3GLYexzdDCYOtPV1RWwsY0L09wPBAIsnv5CdfDGvO/i//2bKolqg4ODL2GtqM1K7sTExG8A8xViDlvfRtRq3NzcHEf+fYVctSrmgpzvWtjktjKVJ6cCDM+K+Ojo6CdInQM9N3XFPGNjY+PFxcWXZhrYnhaFCjL2ZwYGBl4A7B0E3V9m9dej3WFEhkKhDxcXF79BMldxEnnWhAhs1Dcgl5JerzemNiLQMjBbAvkVBI0FkAZR5jSjnH9LDPwLuLa2JvOwqalJMgiqxBNE5Xf6Jhz8s9/vH1a3Y6UHwUsuJa9yH4EUaKG3kMc0EQ8hk9h4kU8Hm5ltlb7Qeg6QTo7FYjK5Yb6sGTgAS5Oi+JmH/pdxLi3YISHTnOqljJf1KyR1Rq0TGCafJhlIsxgvapMGbcVXrclqjhrHSMsJgClC4MkRsM+3fBYgt575fL4fdTOT1vSguu3Fp+T+EWAAIsBLQXdxwbQAAAAASUVORK5CYII=);
          background-repeat: no-repeat;
          background-position: 50% 40%;
          background-size: contain;
        }
      }

      .post-timestamp {
        color: #666;
      }

      .post-like-throbber {
        margin-left: 5px;
      }

      .post-hide-throbber {
        margin-left: 5px;
      }
    }
  }
}

// "More" menu in post footer
// (it's just an override, default styles are in react-dd-menu/src/scss/react-dd-menu.scss)
.dd-menu .dd-menu-items .dd-menu-item {
  &:hover {
    background-color: #eee !important;
  }
  &.dd-menu-item-danger:hover {
    color: #300 !important;
    background-color: #fcc !important;
  }

  .dd-menu-item-link {
    padding: 6px 12px !important;
  }
  &:first-child .dd-menu-item-link {
    padding-top: 8px !important;
    padding-bottom: 5px !important;
  }
  &:last-child .dd-menu-item-link {
    padding-top: 5px !important;
    padding-bottom: 8px !important;
  }
}

// Used in both create-post and edit-post
.post-editor {
  position: relative; // necessary for proper width of dropzone inside this container

  // Clearfix (http://www.cssmojo.com/latest_new_clearfix_so_far/)
  &:after {
    content: '';
    display: table;
    clear: both;
  }

  .post-textarea {
    @include editarea;

    color: #000;
    font-size: $font-size-post-body;
    line-height: $line-height-post-body;
  }

  .post-edit-options {
    float: left;
    margin-bottom: 11px;

    .post-edit-attachments {
      cursor: pointer;

      &:hover span:last-child {
        text-decoration: underline;
      }
    }

    .post-edit-more-trigger {
      color: #333;
      margin-left: 15px;
    }

    .post-edit-more {
      margin-top: 10px;

      .post-edit-more-checkbox {
        margin: 0 5px 0 1px;
        vertical-align: middle;
      }
      .post-edit-more-labeltext {
        font-weight: normal;
        vertical-align: middle;
      }
    }
  }

  .post-edit-actions {
    text-align: right;
    margin-bottom: 8px;
  }

  .post-cancel {
    font-size: 12px;
    margin-right: 10px;
  }

  .post-edit-throbber {
    margin-right: 10px;
  }

  .post-error {
    margin: 10px 0 !important;
  }
}

.recently-hidden-post {
  padding-left: 63px;
}

.single-post {
  border-top: 1px solid #eee;
  padding-top: 14px;
  padding-bottom: 0;
  border-bottom: 0 none;

  .post-top {
    margin-left: 77px + 10px;
    @media (max-width: 767px) { margin-left: 0; min-height: 77px; }

    .post-header {
      font-size: $font-size-post-header-single;
      line-height: $line-height-post-header-single;
    }

    .post-text {
      font-size: $font-size-post-body-single;
      line-height: $line-height-post-body-single;
    }
  }

  .post-bottom {
    margin-left: 77px + 10px;
    @media (max-width: 767px) { margin-left: 0; }
  }

  .post-editor {
    .post-textarea {
      font-size: $font-size-post-body-single;
      line-height: $line-height-post-body-single;
    }
  }
}

.timeline-post.direct-post {
  background-color: #eee;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 48 48'><path fill='%23ffffff' d='M40 8H8c-2.21 0-3.98 1.79-3.98 4L4 36c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 8L24 26 8 16v-4l16 10 16-10v4z'/></svg>");
  background-repeat: no-repeat;
  background-position: top right;
  background-position: top .5em right .5em;
  padding-left: 1em;
  padding-right: 1em;
  border-bottom: 1px solid #fff;
  margin: -1px -1em 5px;
  border-radius: 5px;
  &.be-fe-folded-text-para:after {
    background: linear-gradient(to bottom, hsla(0, 0% , 93% , 0), hsla(0, 0% , 93% , .007));
  }
  &.be-fe-folded-text-read-more {
    background: linear-gradient(to right, hsla(0, 0% , 93% , 0), #eee 3.5em);
  }
  &.be-fe-folded-text:after {
    background: linear-gradient(to bottom, hsla(0, 0% , 93% , 0), hsla(0, 0% , 93% , .007));
  }
  &.fa-inverse {
    color: #eee;
  }
}

.single-post.direct-post {
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 48 48'><path fill='%23eeeeee' d='M40 8H8c-2.21 0-3.98 1.79-3.98 4L4 36c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 8L24 26 8 16v-4l16 10 16-10v4z'/></svg>") no-repeat top right
}

.dummy-post {
  .post-top {
    color: #eee;

    .post-header a {
      color: #b8c0e6;
    }

    .post-text {
      color: #ddd;
    }
  }

  .post-bottom {
    color: #eee;

    .attachments .attachment {
      border-color: #e4e4e4;
      background-color: #f2f2f2;

      height: 100px;

      &.dummy-attachment-0 { width: 75px; }
      &.dummy-attachment-1 { width: 100px; }
      &.dummy-attachment-2 { width: 150px; }
    }

    .post-footer a {
      color: #ced5f2;
    }

    .likes {
      .likes-icon {
        float: none;
        margin: 0;
        color: #ffe099;
      }

      a {
        color: #ced5f2;
      }
    }
  }
}
